<!DOCTYPE html>

<html>
<head>
  <title> Login </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="./css/style.css">
</head>


<body>

<div class="CenterALL">

<div class="contenedorPadre">

  <div class="Titulo">
   <h1>- Login to EDA -</h1>
  </div>  
 
  <div class="subtitulo"> 
   <p> You are welcome to your future</p>
  </div>
 
<div class="FontContenedor">
 <form id="loginForm">
   <label for="dni" class="fontcustom1"> DNI: </label>
   <br>
   <input type="text" id="dni" required>
   <br>
   <br>
   <label for="contrasenia" class="fontcustom1">Contrasenia:</label>
   <br>
   <input type="password" id="contrasenia" required>
   <br>
   <br>
   <br>
   <div class="button1">
   <button type="submit" class="btn btn-dark"> Iniciar Sesion </button>
   </div>
   
 </form>
</div>
 
</div>
 
 <script>
   document.getElementById("loginForm").addEventListener("submit", function(event) {                                 
   event.preventDefault();
   
   var dniInput = document.getElementById("dni").value;
   var contraseiaInput = document.getElementById("contrasenia").value;
   var url = "https://registroapi-b984b-default-rtdb.firebaseio.com/Registro.json";
   
   
   fetch(url)
    .then(function(response) {
	 return response.json();
	 })
	
   .then(function(data) {
    var registroEncontrado = false;
	var registroId;
	
	for (var key in data) {
	   if (data.hasOwnProperty(key) && data[key].dni == dniInput && data[key].contrasenia == contraseiaInput) {
	   registroEncontrado = true;
	   registroId = key;
	   break;
	   }
	 }
	 
	 
	if (registroEncontrado) {
	   window.location.href = "alumnos.html?id=" + encodeURIComponent(registroId);
	   } else {
	     alert("Credenciales Invalidas, Intente de nuevo.");
	   }
	  })
	  
	.catch(function(error) {
     alert();
     console.error(error);	 
	 
	});
});   
 
 
 </script>

</div>
</body>

</html>